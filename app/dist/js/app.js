(()=>{"use strict";var e={984:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});const o="/src/assets/close.svg"},933:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});const o="/src/assets/error.svg"},383:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});const o="/src/assets/logo.svg"},539:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});const o="/src/assets/menu.svg"},337:(e,t,n)=>{n.r(t)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var l=t[o]={exports:{}};return e[o](l,l.exports,n),l.exports}n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{let e=null,t=[];const o=document.getElementById("reportsTable"),r=document.getElementById("resultTable"),l=document.getElementById("totalValue"),a=document.getElementById("totalValueText");function c(){document.getElementById("menu").style.display="none"}function s(){document.querySelector(".errorValue").style="display: none",document.getElementById("value").style.borderColor="#979797";const n=document.getElementById("itemName").value,o=document.getElementById("value").value,r=document.getElementById("selectTransaction").value;if(""==n)return document.getElementById("itemName").style.borderColor="#ff0000",document.querySelector(".errorName").style="display: flex",void(document.querySelector(".errorNameText").innerHTML="O campo é obrigatório");if(""==o)return document.getElementById("value").style.borderColor="#ff0000",document.querySelector(".errorValue").style="display: flex",void(document.querySelector(".errorValueText").innerHTML="O campo é obrigatório");document.querySelector(".name").querySelector("input").value="",document.querySelector(".value").querySelector("input").value="";let l=o;l=String(l.slice(2)),l=l.replace(/[#.]/g,""),l=l.replace(",","."),e?async function(n,o,r){t.push({type:r,name:n,value:o}),await fetch("https://api.airtable.com/v0/appRNtYLglpPhv2QD/Historico",{method:"PATCH",headers:{Authorization:"Bearer key2CwkHb0CKumjuM","Content-Type":"application/json"},body:JSON.stringify({records:[{id:e.id,fields:{Responsavel:"1881",Json:JSON.stringify(t)}}]})}).then((e=>e.json())),i(),u(!1)}(n,l,r):async function(e,t,n){await fetch("https://api.airtable.com/v0/appRNtYLglpPhv2QD/Historico",{method:"POST",headers:{Authorization:"Bearer key2CwkHb0CKumjuM","Content-Type":"application/json"},body:JSON.stringify({records:[{fields:{Responsavel:"1881",Json:JSON.stringify([{type:n,name:e,value:t}])}}]})}).then((e=>e.json())),await i(),u(!1)}(n,l,r)}async function d(){confirm("Deseja realmente excluir todas as transações?")&&(await fetch("https://api.airtable.com/v0/appRNtYLglpPhv2QD/Historico",{method:"PATCH",headers:{Authorization:"Bearer key2CwkHb0CKumjuM","Content-Type":"application/json"},body:JSON.stringify({records:[{id:e.id,fields:{Responsavel:"1881",Json:""}}]})}).then((e=>e.json())),t=[],i())}async function i(){await fetch("https://api.airtable.com/v0/appRNtYLglpPhv2QD/Historico?filterByFormula="+encodeURI("({Responsavel} = '1881')"),{headers:{Authorization:"Bearer key2CwkHb0CKumjuM"}}).then((e=>e.json())).then((t=>e=t.records[0])),e.fields.Json?(t=JSON.parse(e.fields.Json),async function(e){const t=r;o.innerHTML="",o.append(t);let n=0;await e.forEach(((e,t)=>{"-"===e.type?n-=Number(e.value):"+"===e.type&&(n+=Number(e.value));const r=document.createElement("tr"),l=document.createElement("td"),a=document.createElement("td");r.append(l),r.append(a),0===t&&(r.style.borderBottomStyle="double"),l.innerHTML=e.type+"&nbsp;&nbsp;&nbsp;"+e.name,a.innerHTML=function(e){const t=e.split("").filter((e=>/\d/.test(e))).join("").padStart(3,"0");return function(e,t="pt-BR",n="BRL"){return new Intl.NumberFormat(t,{style:"currency",currency:n}).format(e)}(t.slice(0,-2)+"."+t.slice(-2))}(e.value),o.prepend(r)})),a.innerHTML=n<0?"[PREJUÍZO]":n>0?"[LUCRO]":"";l.innerHTML=n.toLocaleString("pt-BR",{minimumFractionDigits:2,style:"currency",currency:"BRL"}),l.append(a)}(t)):u(!0)}function u(e){!0===e?(document.querySelector(".transactionsReport").querySelector("table").style.display="none",document.querySelector(".transactionsReport").querySelector("h2").style.display="flex"):(document.querySelector(".transactionsReport").querySelector("table").style.display="table",document.querySelector(".transactionsReport").querySelector("h2").style.display="none")}n(337),n(984),n(539),n(383),n(933);const m=document.getElementById("menuImg"),y=document.getElementById("closeMenu"),p=document.getElementById("createTransactionButton"),f=document.getElementById("addButton"),v=document.getElementById("buttonCreateDataMobile"),g=document.getElementById("buttonClearMobile"),b=document.getElementById("clearButton"),E=document.getElementById("itemName"),B=document.getElementById("value");i(),m.addEventListener("click",(function(){document.getElementById("menu").style.display="block"})),y.addEventListener("click",c),p.addEventListener("click",s),f.addEventListener("click",s),v.addEventListener("click",c),v.addEventListener("click",s),B.addEventListener("click",(function(){document.querySelector(".errorValue").style="display: none",document.getElementById("value").style.borderColor="#979797"})),E.addEventListener("click",(function(){document.querySelector(".errorName").style="display: none",document.getElementById("itemName").style.borderColor="#979797"})),g.addEventListener("click",d),b.addEventListener("click",d)})()})();